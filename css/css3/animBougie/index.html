<!doctype html>
<html>
<!--[if lt IE 7]> <html class="no-js ie lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<title>home</title>
	<meta name="description" content="">
	<meta name="author" content="">
	<meta name="viewport" content="width=device-width">
	<link rel="stylesheet" href="public/css/reset.css">	
	<link rel="stylesheet" href="public/css/style.css">
</head>
<body>

	<div class="bougieContent">
		<div class="bougie">
			<div class="bougie_body"></div>
			<div class="bougie_head"></div>
		</div>
		<div class="bougie_fondue"></div>
	</div>
	
	
	<!-- 
	test mÃ©thode alternative, bug sous chrome
	<div class="bougie">
		<div class="bougie_body"></div>
		<div class="bougie_head animate2"></div>
	</div> 
	-->
</body>
	<script type="text/javascript" src="public/js/libs/jquery-1.8.2.min.js"></script>
	<script type="text/javascript" src="public/js/modernizr.custom.00393.js"></script>
	<script>
		$(document).ready(function(){

			if($("html").hasClass("cssanimations") && $("html").hasClass("csstransforms")){
				var $bougieContent = $(".bougieContent");
				$bougieContent.addClass("animate");
				setTimeout(function(){
					$bougieContent.removeClass("animate");
					$bougieContent.addClass("fondue");
					 $(".bougie_fondue").show();
					 $(".bougie_head").fadeOut(500);
				},4900);
			}
			else{
				console.log("fallback Animation bougie");
				var $bougieContent = $(".bougieContent"),
					$bougie_head = $(".bougie_head"),
					tSprite = new Array("-0", "-41", "-82"),
					iFlame = 0,
					nbSprite = tSprite.length,
					animateFlame = true;

					function flame(){
						if(animateFlame){
							$bougie_head.css({"left" : tSprite[iFlame]+"px"});
							iFlame = (iFlame+1 == nbSprite) ? 0 : ++iFlame;
							setTimeout(function(){flame();}, 30);
						}
					}
					flame();

					$bougie_head.animate({
						"top" : -15
					}, 5000,
					function(){
						$bougieContent.removeClass("animate");
						$bougieContent.addClass("fondue");
						animateFlame = false;
						$(".bougie_fondue").show();
						$(".bougie_head").fadeOut(500);
					});
			}
		});
	</script>
</html>
</html>